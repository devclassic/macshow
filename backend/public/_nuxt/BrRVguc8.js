import{N as J,D as le,b as U,E as Me,G as D,z as B,H as ge,I as Pe,J as Be,i as ue,A as w,c as Q,o as N,a as W,K as oe,x as _,k as o,t as De,w as F,C as te,L as Ae,M as pe,O as Oe,P as H,Q as _e,R as Fe,S as $e,T as ze,U as de,q as Ne,V as Ye,W as Re,X as ce,l as je,Y as Ue,B as Ve,Z as Xe}from"./C_51ZNOb.js";import{P as ee,F as We,t as He,E as Ke,a as qe}from"./DG-G6Us5.js";import{b as se,u as ae,d as K,i as xe,a as ne,_ as ye,C as Ge,E as Ze,c as Je,h as Qe,e as eo,g as oo,r as to,f as no,j as lo,k as fe,l as so,w as ao}from"./DtnbboDV.js";import{u as ro}from"./5spP6Te3.js";import{U as be,u as io}from"./CgeVLJQP.js";import{t as uo,u as ve}from"./BzzUKFE_.js";import{g as co}from"./BEpc7-jZ.js";import{u as fo}from"./DYIBTMHE.js";const Ce=e=>{if(!e)return{onClick:J,onMousedown:J,onMouseup:J};let s=!1,d=!1;return{onClick:u=>{s&&d&&e(u),s=d=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{d=u.target===u.currentTarget}}},vo=se({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:K([String,Array,Object])},zIndex:{type:K([String,Number])}}),mo={click:e=>e instanceof MouseEvent},go="overlay";var po=le({name:"ElOverlay",props:vo,emits:mo,setup(e,{slots:s,emit:d}){const p=ae(go),t=r=>{d("click",r)},{onClick:c,onMousedown:u,onMouseup:g}=Ce(e.customMaskEvent?void 0:t);return()=>e.mask?U("div",{class:[p.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:u,onMouseup:g},[D(s,"default")],ee.STYLE|ee.CLASS|ee.PROPS,["onClick","onMouseup","onMousedown"]):Me("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[D(s,"default")])}});const yo=po,he=Symbol("dialogInjectionKey"),me="dialog-fade",we=se({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:xe},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),bo={close:()=>!0},Co=(e,s,d,p)=>{const t={offsetX:0,offsetY:0},c=B(!1),u=(f,v)=>{if(e.value){const{offsetX:b,offsetY:C}=t,E=e.value.getBoundingClientRect(),I=E.left,a=E.top,k=E.width,M=E.height,A=document.documentElement.clientWidth,z=document.documentElement.clientHeight,Y=-I+b,R=-a+C,$=A-I-k+b,T=z-a-(M<z?M:0)+C;p?.value||(f=Math.min(Math.max(f,Y),$),v=Math.min(Math.max(v,R),T)),t.offsetX=f,t.offsetY=v,e.value.style.transform=`translate(${ne(f)}, ${ne(v)})`}},g=f=>{const v=f.clientX,b=f.clientY,{offsetX:C,offsetY:E}=t,I=k=>{c.value||(c.value=!0);const M=C+k.clientX-v,A=E+k.clientY-b;u(M,A)},a=()=>{c.value=!1,document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",I),document.addEventListener("mouseup",a)},r=()=>{s.value&&e.value&&(s.value.addEventListener("mousedown",g),window.addEventListener("resize",y))},m=()=>{s.value&&e.value&&(s.value.removeEventListener("mousedown",g),window.removeEventListener("resize",y))},S=()=>{t.offsetX=0,t.offsetY=0,e.value&&(e.value.style.transform="")},y=()=>{const{offsetX:f,offsetY:v}=t;u(f,v)};return ge(()=>{Pe(()=>{d.value?r():m()})}),Be(()=>{m()}),{isDragging:c,resetPosition:S,updatePosition:y}},ho=(...e)=>s=>{e.forEach(d=>{d.value=s})},wo=["aria-level"],Eo=["aria-label"],ko=["id"],So=le({name:"ElDialogContent",__name:"dialog-content",props:we,emits:bo,setup(e,{expose:s}){const{t:d}=ro(),{Close:p}=Ge,t=e,{dialogRef:c,headerRef:u,bodyId:g,ns:r,style:m}=ue(he),{focusTrapRef:S}=ue(We),y=ho(S,c),f=w(()=>!!t.draggable),v=w(()=>!!t.overflow),{resetPosition:b,updatePosition:C,isDragging:E}=Co(c,u,f,v),I=w(()=>[r.b(),r.is("fullscreen",t.fullscreen),r.is("draggable",f.value),r.is("dragging",E.value),r.is("align-center",!!t.alignCenter),{[r.m("center")]:t.center}]);return s({resetPosition:b,updatePosition:C}),(a,k)=>(N(),Q("div",{ref:o(y),class:_(I.value),style:pe(o(m)),tabindex:"-1"},[W("header",{ref_key:"headerRef",ref:u,class:_([o(r).e("header"),a.headerClass,{"show-close":a.showClose}])},[D(a.$slots,"header",{},()=>[W("span",{role:"heading","aria-level":a.ariaLevel,class:_(o(r).e("title"))},De(a.title),11,wo)]),a.showClose?(N(),Q("button",{key:0,"aria-label":o(d)("el.dialog.close"),class:_(o(r).e("headerbtn")),type:"button",onClick:k[0]||(k[0]=M=>a.$emit("close"))},[U(o(Ze),{class:_(o(r).e("close"))},{default:F(()=>[(N(),te(Ae(a.closeIcon||o(p))))]),_:1},8,["class"])],10,Eo)):oe("v-if",!0)],2),W("div",{id:o(g),class:_([o(r).e("body"),a.bodyClass])},[D(a.$slots,"default")],10,ko),a.$slots.footer?(N(),Q("footer",{key:0,class:_([o(r).e("footer"),a.footerClass])},[D(a.$slots,"footer")],2)):oe("v-if",!0)],6))}});var To=ye(So,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Io=se({...we,appendToBody:Boolean,appendTo:{type:He.to.type,default:"body"},beforeClose:{type:K(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"},transition:{type:K([String,Object]),default:void 0}}),Lo={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[be]:e=>Je(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Mo=(e,s={})=>{Oe(e)||uo("[useLockscreen]","You need to pass a ref param to this function");const d=s.ns||ae("popup"),p=w(()=>d.bm("parent","hidden"));let t=0,c=!1,u="0",g=!1;const r=()=>{g||(g=!0,setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=u,to(document.body,p.value))},200))};H(e,m=>{if(!m){r();return}g=!1,c=!Qe(document.body,p.value),c&&(u=document.body.style.width,eo(document.body,p.value)),t=co(d.namespace.value);const S=document.documentElement.clientHeight<document.body.scrollHeight,y=oo(document.body,"overflowY");t>0&&(S||y==="scroll")&&c&&(document.body.style.width=`calc(100% - ${t}px)`)}),_e(()=>r())},Po=(e,s)=>{var d;const t=Fe().emit,{nextZIndex:c}=no();let u="";const g=ve(),r=ve(),m=B(!1),S=B(!1),y=B(!1),f=B((d=e.zIndex)!=null?d:c()),v=B(!1);let b,C;const E=fo(),I=w(()=>{var n,i;return(i=(n=E.value)==null?void 0:n.namespace)!=null?i:lo}),a=w(()=>{var n;return(n=E.value)==null?void 0:n.dialog}),k=w(()=>{const n={},i=`--${I.value}-dialog`;if(!e.fullscreen){e.top&&(n[`${i}-margin-top`]=e.top);const h=ne(e.width);h&&(n[`${i}-width`]=h)}return n}),M=w(()=>{var n,i,h;return((h=(i=e.draggable)!=null?i:(n=a.value)==null?void 0:n.draggable)!=null?h:!1)&&!e.fullscreen}),A=w(()=>{var n,i,h;return(h=(i=e.alignCenter)!=null?i:(n=a.value)==null?void 0:n.alignCenter)!=null?h:!1}),z=w(()=>{var n,i,h;return(h=(i=e.overflow)!=null?i:(n=a.value)==null?void 0:n.overflow)!=null?h:!1}),Y=w(()=>A.value?{display:"flex"}:{}),R=w(()=>{var n,i,h;const G=(h=(i=e.transition)!=null?i:(n=a.value)==null?void 0:n.transition)!=null?h:me,Ie={name:G,onAfterEnter:$,onBeforeLeave:j,onAfterLeave:T};if($e(G)){const P={...G},Z=(X,Le)=>re=>{ze(X)?X.forEach(ie=>{de(ie)&&ie(re)}):de(X)&&X(re),Le()};return P.onAfterEnter=Z(P.onAfterEnter,$),P.onBeforeLeave=Z(P.onBeforeLeave,j),P.onAfterLeave=Z(P.onAfterLeave,T),P.name||(P.name=me),P}return Ie});function $(){t("opened")}function T(){t("closed"),t(be,!1),e.destroyOnClose&&(y.value=!1),v.value=!1}function j(){v.value=!0,t("close")}function q(){C?.(),b?.(),e.openDelay&&e.openDelay>0?{stop:b}=fe(()=>O(),e.openDelay):O()}function l(){b?.(),C?.(),e.closeDelay&&e.closeDelay>0?{stop:C}=fe(()=>x(),e.closeDelay):x()}function L(){function n(i){i||(S.value=!0,m.value=!1)}e.beforeClose?e.beforeClose(n):l()}function V(){e.closeOnClickModal&&L()}function O(){so&&(m.value=!0)}function x(){m.value=!1}function Ee(){t("openAutoFocus")}function ke(){t("closeAutoFocus")}function Se(n){var i;((i=n.detail)==null?void 0:i.focusReason)==="pointer"&&n.preventDefault()}e.lockScroll&&Mo(m);function Te(){e.closeOnPressEscape&&L()}return H(()=>e.zIndex,()=>{var n;f.value=(n=e.zIndex)!=null?n:c()}),H(()=>e.modelValue,n=>{var i;n?(S.value=!1,v.value=!1,q(),y.value=!0,f.value=(i=e.zIndex)!=null?i:c(),Ne(()=>{t("open"),s.value&&(s.value.parentElement.scrollTop=0,s.value.parentElement.scrollLeft=0,s.value.scrollTop=0)})):m.value&&l()}),H(()=>e.fullscreen,n=>{s.value&&(n?(u=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=u)}),ge(()=>{e.modelValue&&(m.value=!0,y.value=!0,q())}),{afterEnter:$,afterLeave:T,beforeLeave:j,handleClose:L,onModalClick:V,close:l,doClose:x,onOpenAutoFocus:Ee,onCloseAutoFocus:ke,onCloseRequested:Te,onFocusoutPrevented:Se,titleId:g,bodyId:r,closed:S,style:k,overlayDialogStyle:Y,rendered:y,visible:m,zIndex:f,transitionConfig:R,_draggable:M,_alignCenter:A,_overflow:z,closing:v}},Bo=["aria-label","aria-labelledby","aria-describedby"],Do=le({name:"ElDialog",inheritAttrs:!1,__name:"dialog",props:Io,emits:Lo,setup(e,{expose:s}){const d=e,p=Ye();io({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},w(()=>!!p.title));const t=ae("dialog"),c=B(),u=B(),g=B(),{visible:r,titleId:m,bodyId:S,style:y,overlayDialogStyle:f,rendered:v,transitionConfig:b,zIndex:C,_draggable:E,_alignCenter:I,_overflow:a,handleClose:k,onModalClick:M,onOpenAutoFocus:A,onCloseAutoFocus:z,onCloseRequested:Y,onFocusoutPrevented:R,closing:$}=Po(d,c);Xe(he,{dialogRef:c,headerRef:u,bodyId:S,ns:t,rendered:v,style:y});const T=Ce(M),j=w(()=>d.modalPenetrable&&!d.modal&&!d.fullscreen);return s({visible:r,dialogContentRef:g,resetPosition:()=>{var l;(l=g.value)==null||l.resetPosition()},handleClose:k}),(l,L)=>(N(),te(o(qe),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:F(()=>[U(Re,ce(o(b),{persisted:""}),{default:F(()=>{var V;return[je(U(o(yo),{"custom-mask-event":"",mask:l.modal,"overlay-class":[(V=l.modalClass)!=null?V:"",`${o(t).namespace.value}-modal-dialog`,o(t).is("penetrable",j.value)],"z-index":o(C)},{default:F(()=>[W("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(m),"aria-describedby":o(S),class:_([`${o(t).namespace.value}-overlay-dialog`,o(t).is("closing",o($))]),style:pe(o(f)),onClick:L[0]||(L[0]=(...O)=>o(T).onClick&&o(T).onClick(...O)),onMousedown:L[1]||(L[1]=(...O)=>o(T).onMousedown&&o(T).onMousedown(...O)),onMouseup:L[2]||(L[2]=(...O)=>o(T).onMouseup&&o(T).onMouseup(...O))},[U(o(Ke),{loop:"",trapped:o(r),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(z),onFocusoutPrevented:o(R),onReleaseRequested:o(Y)},{default:F(()=>[o(v)?(N(),te(To,ce({key:0,ref_key:"dialogContentRef",ref:g},l.$attrs,{center:l.center,"align-center":o(I),"close-icon":l.closeIcon,draggable:o(E),overflow:o(a),fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:o(k)}),Ue({header:F(()=>[l.$slots.title?D(l.$slots,"title",{key:1}):D(l.$slots,"header",{key:0,close:o(k),titleId:o(m),titleClass:o(t).e("title")})]),default:F(()=>[D(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:F(()=>[D(l.$slots,"footer")]),key:"0"}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):oe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Bo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ve,o(r)]])]}),_:3},16)]),_:3},8,["to","disabled"]))}});var Ao=ye(Do,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const jo=ao(Ao);export{jo as E};
